---
import Layout from '../../layouts/Layout.astro';
import { hobbies } from '../../data/hobbies.json';

export function getStaticPaths() {
  const languages = ['en', 'es', 'de', 'fr', 'pt', 'ja', 'ar', 'hi'];
  return languages.map(lang => ({ params: { lang } }));
}

const { lang } = Astro.params;

const translations = {
  title: { en: "Hobby Cost Calculator | Find Your Next Passion", es: "Calculadora de Costos de Hobbies | Encuentra Tu PasiÃ³n", de: "Hobby-Kosten-Rechner | Finde deine Leidenschaft", fr: "Calculateur de CoÃ»t de Loisir | Trouvez Votre Passion", pt: "Calculadora de Custos de Hobby | Encontre Sua PaixÃ£o", ja: "è¶£å‘³ã®è²»ç”¨è¨ˆç®—æ©Ÿ | ã‚ãªãŸã®æƒ…ç†±ã‚’è¦‹ã¤ã‘ã‚ˆã†", ar: "Ø­Ø§Ø³Ø¨Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª | Ø§Ø¨Ø­Ø« Ø¹Ù† Ø´ØºÙÙƒ Ø§Ù„ØªØ§Ù„ÙŠ", hi: "à¤¶à¥Œà¤• à¤²à¤¾à¤—à¤¤ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤° | à¤…à¤ªà¤¨à¤¾ à¤…à¤—à¤²à¤¾ à¤œà¥à¤¨à¥‚à¤¨ à¤–à¥‹à¤œà¥‡à¤‚" },
  subtitle: { en: "Estimate startup costs for 50+ hobbies with our free calculator and currency conversion.", es: "Estima los costos iniciales para mÃ¡s de 50 pasatiempos con nuestra calculadora gratuita y conversiÃ³n de moneda.", de: "SchÃ¤tzen Sie die Anschaffungskosten fÃ¼r Ã¼ber 50 Hobbys mit unserem kostenlosen Rechner und WÃ¤hrungsumrechnung.", fr: "Estimez les coÃ»ts de dÃ©marrage pour plus de 50 loisirs avec notre calculateur gratuit et notre conversion de devises.", pt: "Estime os custos iniciais para mais de 50 hobbies com nossa calculadora gratuita e conversÃ£o de moeda.", ja: "ç„¡æ–™ã®è¨ˆç®—æ©Ÿã¨é€šè²¨æ›ç®—ã§50ä»¥ä¸Šã®è¶£å‘³ã®é–‹å§‹è²»ç”¨ã‚’è¦‹ç©ã‚‚ã‚Šã¾ã™ã€‚", ar: "Ù‚Ø¯Ø± ØªÙƒØ§Ù„ÙŠÙ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„ Ù„Ø£ÙƒØ«Ø± Ù…Ù† 50 Ù‡ÙˆØ§ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¢Ù„Ø© Ø§Ù„Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù…Ø¬Ø§Ù†ÙŠØ© ÙˆØªØ­ÙˆÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Øª.", hi: "à¤¹à¤®à¤¾à¤°à¥‡ à¤®à¥à¤«à¥à¤¤ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤° à¤”à¤° à¤®à¥à¤¦à¥à¤°à¤¾ à¤°à¥‚à¤ªà¤¾à¤‚à¤¤à¤°à¤£ à¤•à¥‡ à¤¸à¤¾à¤¥ 50+ à¤¶à¥Œà¤• à¤•à¥‡ à¤²à¤¿à¤ à¤¸à¥à¤Ÿà¤¾à¤°à¥à¤Ÿà¤…à¤ª à¤²à¤¾à¤—à¤¤ à¤•à¤¾ à¤…à¤¨à¥à¤®à¤¾à¤¨ à¤²à¤—à¤¾à¤à¤‚à¥¤" },
  popular_hobbies: { en: "Popular Hobby Calculators", es: "Calculadoras de Hobbies Populares", de: "Beliebte Hobby-Rechner", fr: "Calculateurs de Loisirs Populaires", pt: "Calculadoras de Hobbies Populares", ja: "äººæ°—ã®è¶£å‘³è¨ˆç®—æ©Ÿ", ar: "Ø­Ø§Ø³Ø¨Ø§Øª Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©", hi: "à¤²à¥‹à¤•à¤ªà¥à¤°à¤¿à¤¯ à¤¶à¥Œà¤• à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°" },
  explore_btn: { en: "Explore Hobbies", es: "Explorar Hobbies", de: "Hobbys erkunden", fr: "Explorer les Loisirs", pt: "Explorar Hobbies", ja: "è¶£å‘³ã‚’æŽ¢ã‚‹", ar: "Ø§Ø³ØªÙƒØ´Ù Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª", hi: "à¤¶à¥Œà¤• à¤–à¥‹à¤œà¥‡à¤‚" }
};

const getText = (key, currentLang) => translations[key]?.[currentLang] || translations[key]?.['en'];
---
<Layout title={getText('title', lang)} lang={lang}>
  <div class="text-center p-12" style="background-color: #4f46e5;">
    <h1 class="text-5xl font-bold text-white">HobbyCalc</h1>
    <p class="py-6 text-lg text-indigo-200">{getText('subtitle', lang)}</p>
    <a href="#popular-hobbies" class="btn btn-warning">{getText('explore_btn', lang)}</a>
  </div>
  <div id="popular-hobbies" class="max-w-6xl mx-auto py-12 px-4">
    <h2 class="text-3xl font-bold text-center mb-8">{getText('popular_hobbies', lang)}</h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      {hobbies.map(hobby => {
        // **FIX:** These lines safely get the text, falling back to English, then to an empty string.
        const name = hobby.name?.[lang] || hobby.name?.['en'];
        const description = hobby.description?.[lang] || hobby.description?.['en'] || '';
        const beginnerCost = hobby.breakdown?.beginner?.costRangeUSD?.[0];

        // Only render the card if the hobby has a name for the current language (or English)
        if (!name) return null;

        return (
          <a href={`/${lang}/hobbies/${hobby.id}`} class="card bg-white shadow-lg hover:shadow-2xl transition-shadow">
            <div class="card-body">
              <h3 class="card-title text-2xl">
                {hobby.emoji || 'ðŸŽ¨'} {name}
              </h3>
              <p>{description}</p>
              {beginnerCost && (
                <div class="badge badge-outline mt-2">${beginnerCost}+</div>
              )}
            </div>
          </a>
        )
      })}
    </div>
  </div>
</Layout>
