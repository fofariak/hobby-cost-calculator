---
interface Props {
  title: string;
  lang: string;
}
const { title, lang = 'en' } = Astro.props;
const languages = { en: 'EN', es: 'Español', de: 'Deutsch', fr: 'Français', pt: 'Português', ja: '日本語', ar: 'العربية', hi: 'हिन्दी' };

// This logic creates the correct URL for other languages
const currentPath = Astro.url.pathname;
const pathWithoutLang = currentPath.startsWith(`/${lang}`) ? currentPath.substring(3) : currentPath;
---
<!doctype html>
<html lang={lang} data-theme="light" dir={lang === 'ar' ? 'rtl' : 'ltr'}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.min.css" />
  </head>
  <body>
    <main class="container">
      <nav>
        <ul>
          <li><a href={`/${lang}/`} class="font-bold">🎨 HobbyCalc</a></li>
        </ul>
        <ul>
          <li>
            <details role="list" dir="ltr">
              <summary aria-haspopup="listbox" class="cursor-pointer">{languages[lang]}</summary>
              <ul role="listbox">
                {Object.entries(languages).map(([code, name]) => (
                  <li>
                    <a href={`/${code}${pathWithoutLang}`}>{name}</a>
                  </li>
                ))}
              </ul>
            </details>
          </li>
        </ul>
      </nav>
      <slot />
    </main>
  </body>
</html>
