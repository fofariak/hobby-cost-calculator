---
interface Props {
  title: string;
  lang: string;
  description?: string;
  keywords?: string;
}

const { 
  title, 
  lang = 'en',
  description,
  keywords
} = Astro.props;

// Multilingual meta content
const metaContent = {
  en: {
    description: description || 'Calculate the true cost of your hobbies with our interactive cost calculator tools.',
    keywords: keywords || 'hobby calculator, cost calculator, hobby expenses, budget planning, hobby costs',
    siteName: 'HobbyCalc - Hobby Cost Calculator'
  },
  es: {
    description: description || 'Calcula el costo real de tus pasatiempos con nuestras herramientas de calculadora de costos interactivas.',
    keywords: keywords || 'calculadora de pasatiempos, calculadora de costos, gastos de pasatiempos, planificaciÃ³n de presupuesto',
    siteName: 'HobbyCalc - Calculadora de Costos de Pasatiempos'
  },
  de: {
    description: description || 'Berechnen Sie die wahren Kosten Ihrer Hobbys mit unseren interaktiven Kostenrechner-Tools.',
    keywords: keywords || 'Hobby-Rechner, Kostenrechner, Hobby-Ausgaben, Budgetplanung',
    siteName: 'HobbyCalc - Hobby-Kostenrechner'
  },
  fr: {
    description: description || 'Calculez le coÃ»t rÃ©el de vos loisirs avec nos outils de calculatrice de coÃ»ts interactifs.',
    keywords: keywords || 'calculatrice de loisirs, calculatrice de coÃ»ts, dÃ©penses de loisirs, planification budgÃ©taire',
    siteName: 'HobbyCalc - Calculatrice de CoÃ»ts de Loisirs'
  },
  pt: {
    description: description || 'Calcule o custo real dos seus hobbies com nossas ferramentas interativas de calculadora de custos.',
    keywords: keywords || 'calculadora de hobbies, calculadora de custos, despesas de hobbies, planejamento orÃ§amentÃ¡rio',
    siteName: 'HobbyCalc - Calculadora de Custos de Hobbies'
  },
  ja: {
    description: description || 'ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªã‚³ã‚¹ãƒˆè¨ˆç®—ãƒ„ãƒ¼ãƒ«ã§è¶£å‘³ã®çœŸã®ã‚³ã‚¹ãƒˆã‚’è¨ˆç®—ã—ã¾ã—ã‚‡ã†ã€‚',
    keywords: keywords || 'è¶£å‘³è¨ˆç®—æ©Ÿ, ã‚³ã‚¹ãƒˆè¨ˆç®—æ©Ÿ, è¶£å‘³ã®è²»ç”¨, äºˆç®—è¨ˆç”»',
    siteName: 'HobbyCalc - è¶£å‘³ã‚³ã‚¹ãƒˆè¨ˆç®—æ©Ÿ'
  },
  ar: {
    description: description || 'Ø§Ø­Ø³Ø¨ Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù„Ù‡ÙˆØ§ÙŠØ§ØªÙƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ø¯ÙˆØ§Øª Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙƒÙ„ÙØ© Ø§Ù„ØªÙØ§Ø¹Ù„ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ù†Ø§.',
    keywords: keywords || 'Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª, Ø­Ø§Ø³Ø¨Ø© Ø§Ù„ØªÙƒÙ„ÙØ©, Ù…ØµØ§Ø±ÙŠÙ Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª, ØªØ®Ø·ÙŠØ· Ø§Ù„Ù…ÙŠØ²Ø§Ù†ÙŠØ©',
    siteName: 'HobbyCalc - Ø­Ø§Ø³Ø¨Ø© ØªÙƒÙ„ÙØ© Ø§Ù„Ù‡ÙˆØ§ÙŠØ§Øª'
  },
  hi: {
    description: description || 'à¤¹à¤®à¤¾à¤°à¥‡ à¤‡à¤‚à¤Ÿà¤°à¥ˆà¤•à¥à¤Ÿà¤¿à¤µ à¤²à¤¾à¤—à¤¤ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤° à¤Ÿà¥‚à¤²à¥à¤¸ à¤•à¥‡ à¤¸à¤¾à¤¥ à¤…à¤ªà¤¨à¥‡ à¤¶à¥Œà¤• à¤•à¥€ à¤µà¤¾à¤¸à¥à¤¤à¤µà¤¿à¤• à¤²à¤¾à¤—à¤¤ à¤•à¥€ à¤—à¤£à¤¨à¤¾ à¤•à¤°à¥‡à¤‚à¥¤',
    keywords: keywords || 'à¤¶à¥Œà¤• à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°, à¤²à¤¾à¤—à¤¤ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°, à¤¶à¥Œà¤• à¤–à¤°à¥à¤š, à¤¬à¤œà¤Ÿ à¤¯à¥‹à¤œà¤¨à¤¾',
    siteName: 'HobbyCalc - à¤¶à¥Œà¤• à¤²à¤¾à¤—à¤¤ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°'
  }
};

const currentMeta = metaContent[lang] || metaContent.en;

const languages = { 
  en: 'English', 
  es: 'EspaÃ±ol', 
  de: 'Deutsch', 
  fr: 'FranÃ§ais', 
  pt: 'PortuguÃªs', 
  ja: 'æ—¥æœ¬èª', 
  ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', 
  hi: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€' 
};

// Create correct URL for other languages
const currentPath = Astro.url.pathname;
const pathWithoutLang = currentPath.startsWith(`/${lang}`) ? currentPath.substring(3) : currentPath;
---

<!doctype html>
<html lang={lang} dir={lang === 'ar' ? 'rtl' : 'ltr'}>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="index, follow" />
    
    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="description" content={currentMeta.description} />
    <meta name="keywords" content={currentMeta.keywords} />
    <meta name="language" content={lang} />
    
    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={currentMeta.description} />
    <meta property="og:site_name" content={currentMeta.siteName} />
    
    <!-- Canonical URL -->
    <link rel="canonical" href={Astro.url} />
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom CSS -->
    <style>
      body {
        font-family: system-ui, -apple-system, sans-serif;
      }
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .card-hover {
        transition: all 0.3s ease;
      }
      .card-hover:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }
    </style>
  </head>
  
  <body class="bg-gray-50 min-h-screen">
    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-40">
      <div class="max-w-7xl mx-auto px-4">
        <div class="flex justify-between items-center h-16">
          <!-- Logo -->
          <a href={`/${lang}/`} class="flex items-center space-x-2 text-xl font-bold text-indigo-600 hover:text-indigo-700">
            <span class="text-2xl">ğŸ¨</span>
            <span>HobbyCalc</span>
          </a>

          <!-- Desktop Navigation -->
          <div class="hidden md:flex items-center space-x-6">
            <a href={`/${lang}/`} class="text-gray-700 hover:text-indigo-600 font-medium">Home</a>
            <a href={`/${lang}/hobbies`} class="text-gray-700 hover:text-indigo-600 font-medium">All Hobbies</a>
            
            <!-- Language Selector -->
            <select 
              id="lang-selector" 
              class="bg-white border border-gray-300 rounded-lg px-3 py-1 text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"
              onchange="window.location.href = this.value"
            >
              {Object.entries(languages).map(([code, name]) => (
                <option value={`/${code}${pathWithoutLang}`} selected={code === lang}>
                  {name}
                </option>
              ))}
            </select>
          </div>

          <!-- Mobile Menu Button -->
          <button id="mobile-menu-btn" class="md:hidden p-2 rounded-lg hover:bg-gray-100">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden border-t py-4">
          <div class="space-y-2">
            <a href={`/${lang}/`} class="block px-4 py-2 text-gray-700 hover:text-indigo-600 hover:bg-gray-50 rounded">Home</a>
            <a href={`/${lang}/hobbies`} class="block px-4 py-2 text-gray-700 hover:text-indigo-600 hover:bg-gray-50 rounded">All Hobbies</a>
            <div class="px-4 py-2">
              <select 
                class="w-full bg-white border border-gray-300 rounded px-2 py-1 text-sm"
                onchange="window.location.href = this.value"
              >
                {Object.entries(languages).map(([code, name]) => (
                  <option value={`/${code}${pathWithoutLang}`} selected={code === lang}>
                    {name}
                  </option>
                ))}
              </select>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="fade-in">
      <slot />
    </main>

    <!-- Back to Top -->
    <button 
      id="back-to-top" 
      class="fixed bottom-6 right-6 bg-indigo-600 text-white p-3 rounded-full shadow-lg hover:bg-indigo-700 opacity-0 invisible transition-all duration-300 z-30"
    >
      <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
      </svg>
    </button>

    <!-- JavaScript -->
    <script>
      // Mobile menu toggle
      document.getElementById('mobile-menu-btn')?.addEventListener('click', () => {
        const menu = document.getElementById('mobile-menu');
        menu?.classList.toggle('hidden');
      });

      // Back to top button
      const backToTop = document.getElementById('back-to-top');
      window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
          backToTop?.classList.remove('opacity-0', 'invisible');
        } else {
          backToTop?.classList.add('opacity-0', 'invisible');
        }
      });

      backToTop?.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });

      // Close mobile menu when clicking outside
      document.addEventListener('click', (e) => {
        const menu = document.getElementById('mobile-menu');
        const btn = document.getElementById('mobile-menu-btn');
        if (!menu?.contains(e.target) && !btn?.contains(e.target)) {
          menu?.classList.add('hidden');
        }
      });
    </script>
  </body>
</html>
